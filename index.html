<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ğŸ§  NeuroQuest</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f5faff;
      text-align: center;
    }

    canvas {
      border: 2px solid #007acc;
      background-color: white;
      margin-top: 20px;
    }

    #infoBox {
      margin-top: 15px;
      padding: 10px;
      background-color: #e6f2ff;
      color: #003366;
      display: inline-block;
    }
  </style>
</head>
<body>

  <h1>ğŸ§  Ù…Ø³ØªÙˆÙ‰ 1: Ø¨Ù†Ø§Ø¡ Ø®Ù„ÙŠØ© Ø¹ØµØ¨ÙŠØ©</h1>
  <canvas id="gameCanvas" width="800" height="600"></canvas>
  <div id="infoBox">Ø§Ø³Ø­Ø¨ Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡ ÙˆØ¶Ø¹Ù‡Ø§ ÙÙŠ Ø£Ù…Ø§ÙƒÙ†Ù‡Ø§ Ø§Ù„ØµØ­ÙŠØ­Ø©</div>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    let draggedPart = null;

    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡
    const neuronParts = [
      { name: "Ø¬Ø³Ù… Ø§Ù„Ø®Ù„ÙŠØ©", x: 400, y: 300, placed: false },
      { name: "Axon", x: 500, y: 300, placed: false },
      { name: "Dendrites", x: 300, y: 300, placed: false }
    ];

    const images = {};
    let imagesLoaded = 0;

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±
    function loadImages() {
      neuronParts.forEach(part => {
        const img = new Image();
        img.src = `${part.name.replace(" ", "-")}.png`; // Ù…Ø«Ù„: Ø¬Ø³Ù…-Ø§Ù„Ø®Ù„ÙŠØ©.png
        img.onload = () => {
          images[part.name] = img;
          imagesLoaded++;
          if (imagesLoaded === neuronParts.length) draw();
        };
      });
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Ø®Ø·ÙˆØ· Ø§Ù„Ø¥Ø±Ø´Ø§Ø¯
      ctx.setLineDash([5]);
      ctx.strokeStyle = "#999";
      ctx.strokeRect(380, 280, 40, 40); // Ø¬Ø³Ù… Ø§Ù„Ø®Ù„ÙŠØ©
      ctx.strokeRect(480, 280, 40, 40); // Axon
      ctx.strokeRect(280, 280, 40, 40); // Dendrites
      ctx.setLineDash([]);

      // Ø±Ø³Ù… Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡
      neuronParts.forEach(part => {
        if (images[part.name]) {
          ctx.drawImage(images[part.name], part.x, part.y, 40, 40);
        } else {
          ctx.fillStyle = "#007acc";
          ctx.fillRect(part.x, part.y, 40, 40);
          ctx.fillStyle = "#fff";
          ctx.font = "12px Arial";
          ctx.fillText(part.name.charAt(0), part.x + 15, part.y + 25);
        }
      });
    }

    canvas.addEventListener("mousedown", e => {
      const rect = canvas.getBoundingClientRect();
      const mouseX = e.clientX - rect.left;
      const mouseY = e.clientY - rect.top;

      neuronParts.forEach(part => {
        if (!part.placed &&
            mouseX > part.x && mouseX < part.x + 40 &&
            mouseY > part.y && mouseY < part.y + 40) {
          draggedPart = part;
        }
      });
    });

    canvas.addEventListener("mousemove", e => {
      if (draggedPart) {
        const rect = canvas.getBoundingClientRect();
        const mouseX = e.clientX - rect.left;
        const mouseY = e.clientY - rect.top;
        draggedPart.x = mouseX - 20;
        draggedPart.y = mouseY - 20;
        draw();
      }
    });

    canvas.addEventListener("mouseup", () => {
      if (draggedPart) {
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù…ÙƒØ§Ù† Ø§Ù„Ø¬Ø³Ù…
        if (draggedPart.name === "Ø¬Ø³Ù… Ø§Ù„Ø®Ù„ÙŠØ©" &&
            draggedPart.x > 370 && draggedPart.x < 390) {
          draggedPart.placed = true;
        }

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Axon
        if (draggedPart.name === "Axon" &&
            draggedPart.x > 470 && draggedPart.x < 490) {
          draggedPart.placed = true;
        }

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Dendrites
        if (draggedPart.name === "Dendrites" &&
            draggedPart.x > 270 && draggedPart.x < 290) {
          draggedPart.placed = true;
        }

        document.getElementById("infoBox").innerText =
          draggedPart.placed ? `âœ… ${draggedPart.name} ØªÙ… ÙˆØ¶Ø¹Ù‡ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­.` : `âŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰`;

        draggedPart = null;
        draw();
      }
    });

    // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
    window.onload = () => {
      loadImages();
    };

    draw();
  </script>
</body>
</html>
